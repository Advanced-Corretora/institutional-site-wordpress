{"version":3,"file":"main.js","sources":["../../src/js/modules/menu.js"],"sourcesContent":["class MobileMenu {\r\n  constructor() {\r\n    this.menuItems = document.querySelectorAll('.menu-item-has-children > a');\r\n    this.hamburgerButton = document.querySelector('.hamburger-menu');\r\n    this.menuContainer = document.querySelector('.menu-container');\r\n    this.closeButton = document.querySelector('.close-icon');\r\n    this.body = document.body;\r\n    this.headerEl = document.querySelector('.header');\r\n    this.overlay = document.querySelector('.submenu-overlay');\r\n    this.handleMenuItemClickBound = this.handleMenuItemClick.bind(this);\r\n    this.closeSubmenuBound = this.closeSubmenu.bind(this);\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n\r\n    if (!this.overlay) {\r\n      this.overlay = document.createElement('div');\r\n      this.overlay.className = 'submenu-overlay';\r\n      (this.headerEl || document.body).appendChild(this.overlay);\r\n    } else {\r\n      if (this.headerEl && this.overlay.parentElement !== this.headerEl) {\r\n        this.headerEl.appendChild(this.overlay);\r\n      }\r\n    }\r\n    \r\n    this.overlay.addEventListener('click', () => {\r\n      document.querySelectorAll('.menu-item-has-children.active').forEach(item => {\r\n        this.closeSubmenu(item);\r\n      });\r\n    });\r\n\r\n    if (this.hamburgerButton) {\r\n      this.setupHamburgerMenu();\r\n    }\r\n\r\n    if (this.menuItems.length > 0) {\r\n      this.setupMenuItems();\r\n    }\r\n  }\r\n\r\n  setupHamburgerMenu() {\r\n    this.hamburgerButton.addEventListener('click', () => {\r\n      const isExpanded = this.hamburgerButton.getAttribute('aria-expanded') === 'true';\r\n      this.toggleMenu(!isExpanded);\r\n    });\r\n\r\n    const menuLinks = document.querySelectorAll('.menu a');\r\n    menuLinks.forEach(link => {\r\n      link.addEventListener('click', e => {\r\n        if (!link.parentElement.classList.contains('menu-item-has-children')) {\r\n          this.toggleMenu(false);\r\n        }\r\n      });\r\n    });\r\n\r\n    if (this.closeButton) {\r\n      this.closeButton.addEventListener('click', () => {\r\n        this.toggleMenu(false);\r\n      });\r\n    }\r\n  }\r\n\r\n  setupMenuItems() {\r\n    this.applyDesktopSubmenuEvents();\r\n\r\n    window.addEventListener('resize', () => {\r\n      this.removeDesktopSubmenuEvents();\r\n      this.applyDesktopSubmenuEvents();\r\n    });\r\n  }\r\n\r\n  applyDesktopSubmenuEvents() {\r\n    if (window.innerWidth > 1024) {\r\n      this.menuItems.forEach(menuItem => {\r\n        menuItem.addEventListener('click', this.handleMenuItemClickBound);\r\n      });\r\n    }\r\n  }\r\n\r\n  removeDesktopSubmenuEvents() {\r\n    this.menuItems.forEach(menuItem => {\r\n      menuItem.removeEventListener('click', this.handleMenuItemClickBound);\r\n    });\r\n  }\r\n\r\n  toggleMenu(show) {\r\n    this.hamburgerButton.setAttribute('aria-expanded', show);\r\n\r\n    if (show) {\r\n      this.menuContainer.classList.add('active');\r\n      this.body.style.overflow = 'hidden';\r\n      this.updateOverlayState();\r\n    } else {\r\n      this.menuContainer.classList.remove('active');\r\n      this.body.style.overflow = '';\r\n\r\n      document.querySelectorAll('.menu-item-has-children').forEach(item => {\r\n        item.classList.remove('active');\r\n        item.classList.remove('closing');\r\n      });\r\n      this.updateOverlayState();\r\n    }\r\n  }\r\n\r\n  updateOverlayState() {\r\n    const anyOpenSubmenu = document.querySelector(\r\n      '.menu-item-has-children.active, .menu-item-has-children.closing'\r\n    );\r\n    const mobileMenuOpen = this.menuContainer && this.menuContainer.classList.contains('active');\r\n    document.body.classList.toggle('submenu-open', !!anyOpenSubmenu || mobileMenuOpen);\r\n  }\r\n\r\n  closeSubmenu(item) {\r\n    if (!item || !item.classList.contains('active')) return;\r\n    item.classList.add('closing');\r\n    item.classList.remove('active');\r\n\r\n    const submenuArea = item.querySelector('.submenu-area');\r\n    if (submenuArea) {\r\n      const onAnimationEnd = e => {\r\n        if (e.target !== submenuArea) return;\r\n        item.classList.remove('closing');\r\n        submenuArea.removeEventListener('animationend', onAnimationEnd);\r\n        this.updateOverlayState();\r\n      };\r\n      submenuArea.addEventListener('animationend', onAnimationEnd, { once: true });\r\n    } else {\r\n      item.classList.remove('closing');\r\n    }\r\n    this.updateOverlayState();\r\n  }\r\n\r\n  handleMenuItemClick(e) {\r\n    e.preventDefault();\r\n    const parent = e.currentTarget.parentElement;\r\n\r\n    if (parent.classList.contains('active')) {\r\n      this.closeSubmenu(parent);\r\n    } else {\r\n      document.querySelectorAll('.menu-item-has-children.active').forEach(item => {\r\n        if (item !== parent) {\r\n          this.closeSubmenu(item);\r\n        }\r\n      });\r\n\r\n      parent.classList.remove('closing');\r\n      parent.classList.add('active');\r\n      this.updateOverlayState();\r\n    }\r\n  }\r\n}\r\n\r\nlet mobileMenu;\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  mobileMenu = new MobileMenu();\r\n});\r\nwindow.mobileMenu = mobileMenu;\r\n\r\nexport default MobileMenu;\r\n"],"names":["MobileMenu","item","isExpanded","link","e","menuItem","show","anyOpenSubmenu","mobileMenuOpen","submenuArea","onAnimationEnd","parent","mobileMenu"],"mappings":"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"}